<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phad: The Living Scroll</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Rozha+One&family=Sahitya:wght@400;700&family=Inter:wght@300;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-paper: #fdf6e3;
            --phad-red: #8B0000;
            --phad-yellow: #f59e0b;
            --ink: #2c0b0e;
        }
        
        body {
            margin: 0;
            background-color: #120303 !important; 
            font-family: 'Sahitya', serif;
            color: var(--ink);
            overflow-x: hidden;
        }

        .font-display { font-family: 'Rozha One', serif; }

        .texture {
            position: fixed; inset: 0;
            background-image: url('https://www.transparenttextures.com/patterns/canvas-orange.jpeg');
            opacity: 0.4; pointer-events: none; z-index: 100; mix-blend-mode: multiply;
        }

        .phad-frame {
            position: fixed; inset: 0; z-index: 9998; pointer-events: none;
            box-shadow: inset 0 0 0 12px var(--phad-red), inset 0 0 0 20px var(--phad-yellow);
        }

        @media (min-width: 768px) {
            .phad-frame { box-shadow: inset 0 0 0 25px var(--phad-red), inset 0 0 0 40px var(--phad-yellow); }
        }

        ::-webkit-scrollbar { width: 0px; background: transparent; }

        .timeline-wrapper { position: relative; width: 100%; background: var(--bg-paper); }
        .timeline-pane { width: 100vw; min-height: 100vh; position: relative; overflow: hidden; }
        
        .line-track { position: absolute; left: 50%; top: 0; width: 2px; height: 100%; transform: translateX(-50%); background: rgba(139, 0, 0, 0.1); }
        .line-fill { position: absolute; top: 0; left: 0; width: 100%; height: 0%; background: linear-gradient(to bottom, var(--phad-red), var(--phad-yellow)); }
        
        .timeline-event-box { display: flex; width: 100%; margin: 250px 0; opacity: 0; transform: translateY(100px); }
        
        .timeline-card { 
            width: 450px; background: white; padding: 40px; 
            border-left: 5px solid var(--phad-red); 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
            position: relative; transform-style: preserve-3d; 
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .card-active {
            box-shadow: 0 0 40px 10px rgba(245, 158, 11, 0.3);
            border-left-color: var(--phad-yellow);
            background: #fffefb;
            transform: scale(1.05);
        }

        .card-active h3 { color: var(--phad-yellow); transition: color 0.4s ease; }

        body.ready-to-show {
            background-color: #FBF2D8 !important;
            transition: background-color 0.8s ease;
        }

        #root {
            opacity: 0;
            transition: opacity 0.6s ease;
        }

        body.ready-to-show #root {
            opacity: 1;
        }

        #portal-curtain {
            position: fixed;
            inset: 0;
            background: #120303;
            z-index: 99999;
            pointer-events: none;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="portal-curtain"></div>

    <script type="text/babel">
        const { useRef, useEffect } = React;

        const motionData = window.Motion || window.framerMotion;
        const { motion, useScroll, useTransform } = motionData || {};

        const Hero = () => (
            <section className="h-screen flex flex-col items-center justify-center relative z-10 px-6">
                <motion.div 
                    initial={{ scale: 0.9, opacity: 0 }} 
                    whileInView={{ scale: 1, opacity: 1 }} 
                    transition={{ duration: 1.5, ease: "circOut" }} 
                    className="text-center relative max-w-5xl mx-auto"
                >
                    <h1 className="font-display text-6xl md:text-8xl text-[#8B0000] leading-tight mb-8">
                        Phad Khulta Hai, Par Kahani Kaun Sunaye?
                    </h1>
                    <motion.div 
                        className="mt-12 text-sm uppercase tracking-[0.4em] text-gray-500 font-bold"
                        animate={{ y: [0, 15, 0] }} 
                        transition={{ repeat: Infinity, duration: 2.5 }}
                    >
                        Scroll Down to Unfold the Story
                    </motion.div>
                </motion.div>
                <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[35rem] font-bold text-[#8B0000] opacity-[0.03] pointer-events-none font-display">10</div>
            </section>
        );

        const HorizontalScroll = () => {
            const targetRef = useRef(null);
            const { scrollYProgress } = useScroll({ target: targetRef });
            const x = useTransform(scrollYProgress, [0, 1], ["0%", "-75%"]);
            
            return (
                <section ref={targetRef} className="relative h-[400vh]">
                    <div className="sticky top-0 h-screen overflow-hidden flex items-center">
                        <motion.div style={{ x }} className="flex h-full w-[400vw]">
                            <div className="w-screen h-full flex items-center justify-center p-20 border-r border-[#8B0000]/10">
                                <div className="max-w-3xl">
                                    <h2 className="font-display text-7xl text-[#8B0000] mb-8">The Keeper of Stories</h2>
                                    <p className="text-2xl text-gray-800 leading-relaxed font-serif italic">Like the Bhopas of Rajasthan who carry the temple of their deities on a scroll...</p>
                                </div>
                            </div>
                            <div className="w-screen h-full flex items-center justify-center p-20 border-r border-[#8B0000]/10">
                                <div className="bg-[#8B0000] text-[#fdf6e3] p-16 rounded-sm shadow-[15px_15px_0px_0px_rgba(245,158,11,1)] max-w-2xl">
                                    <h3 className="font-display text-5xl mb-6 text-[#f59e0b]">Scrollytelling</h3>
                                    <p className="text-xl opacity-90 leading-relaxed">This website mimics the physical unfolding of the scroll...</p>
                                </div>
                            </div>
                            <div className="w-screen h-full flex flex-col items-center justify-center p-10 relative border-r border-[#8B0000]/10">
                                <h2 className="font-display text-[20vw] text-[#8B0000] opacity-5 absolute">GROUP 10</h2>
                                <div className="relative z-10 bg-[#fdf6e3]/90 p-20 border-4 border-double border-[#8B0000] max-w-5xl text-center shadow-2xl backdrop-blur-sm">
                                    <p className="text-xl font-bold text-[#c2410c] tracking-widest mb-4">FLAME UNIVERSITY</p>
                                    <h3 className="text-5xl font-display text-[#2c0b0e] mb-6">Discover India Program</h3>
                                </div>
                            </div>  
                            <div className="w-screen h-full flex items-center justify-center bg-[#8B0000] text-[#fdf6e3]">
                                <div className="text-center">
                                    <h2 className="font-display text-8xl mb-8">The Process</h2>
                                    <p className="text-2xl opacity-80 font-serif italic">Take a look at the process &rarr;</p>
                                </div>
                            </div>
                        </motion.div>
                    </div>
                </section>
            );
        };

        const Timeline = () => {
            useEffect(() => {
                gsap.registerPlugin(ScrollTrigger);
                gsap.to("#timelineFill", {
                    height: "100%", ease: "none",
                    scrollTrigger: { trigger: ".timeline-pane", start: "top center", end: "bottom center", scrub: 1 }
                });

                gsap.utils.toArray(".timeline-event-box").forEach((box) => {
                    const card = box.querySelector(".timeline-card");
                    gsap.to(box, { opacity: 1, y: 0, duration: 1, scrollTrigger: { trigger: box, start: "top 90%" } });

                    ScrollTrigger.create({
                        trigger: box,
                        start: "top 60%", 
                        end: "bottom 40%",
                        onEnter: () => card.classList.add("card-active"),
                        onLeave: () => card.classList.remove("card-active"),
                        onEnterBack: () => card.classList.add("card-active"),
                        onLeaveBack: () => card.classList.remove("card-active")
                    });
                    
                    box.addEventListener("mousemove", (e) => {
                        const rect = card.getBoundingClientRect();
                        const x = (e.clientX - rect.left - rect.width/2) / 25;
                        const y = -(e.clientY - rect.top - rect.height/2) / 25;
                        gsap.to(card, { rotationY: x, rotationX: y, transformPerspective: 1000, duration: 0.6 });
                    });
                    box.addEventListener("mouseleave", () => {
                        gsap.to(card, { rotationY: 0, rotationX: 0, duration: 1, ease: "power2.out" });
                    });
                });
            }, []);

            const steps = [
                { id: "01", title: "Kharat", desc: "The ritual of boiling and starching the cloth begins.", link: "step1.html", side: "start" },
                { id: "02", title: "Rang", desc: "Mining natural pigments and precious mineral stones.", link: "step2.html", side: "end" },
                { id: "03", title: "Rekha", desc: "The first sketch using light yellow pigments.", link: "step3.html", side: "start" },
                { id: "04", title: "Likhi", desc: "Detailed drawing and outlining the divine figures.", link: "step4.html", side: "end" },
                { id: "05", title: "Sajawat", desc: "Decorative patterns and intricate motifs are added.", link: "step5.html", side: "start" },
                { id: "06", title: "Shringar", desc: "Adorning the deities with jewelry and fine details.", link: "step6.html", side: "end" },
                { id: "07", title: "Siyahi", desc: "The final black ink outlining that defines the soul.", link: "step7.html", side: "start" },
                { id: "08", title: "Prana Pratishtha", desc: "The final eye-opening ritual to breathe life.", link: "step8.html", side: "end" }
            ];

            return (
                <section className="timeline-wrapper" id="timeline">
                    <div className="timeline-pane">
                        <div className="line-track"><div className="line-fill" id="timelineFill"></div></div>
                        <div className="max-w-6xl mx-auto py-32">
                            {steps.map((step) => (
                                <div key={step.id} className={`timeline-event-box justify-${step.side} ${step.side === 'start' ? 'pl-10' : 'pr-10'}`}>
                                    <div className="timeline-card">
                                        <h3 className="font-display text-4xl text-[#8B0000]">Step {step.id}: {step.title}</h3>
                                        <p className="mt-4 text-lg">{step.desc}</p>
                                        <a href={step.link} className="inline-block mt-8 uppercase tracking-widest text-xs font-bold border-b-2 border-[#f59e0b] text-[#8B0000]">Unfold Details →</a>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        const Team = () => {
            const teamMembers = [
                { name: "Vivek Ray", role: "Group Representative (GR)", img: "vivek.jpeg" },
                { name: "Palak Rajput", role: "Co-GR", img: "palak.jpeg" },
                { name: "Aadi Bokriya", role: "Team Member", img: "aadi.jpeg" },
                { name: "Aayush Oswal", role: "Team Member", img: "aayush.png" },
                { name: "Arushi Rastogi", role: "Team Member", img: "arushi.png" },
                { name: "Divyanshi Jain", role: "Team Member", img: "divyanshi.jpeg" },
                { name: "Harshit Singh", role: "Team Member", img: "harshit.png" },
                { name: "Karan Divekar", role: "Team Member", img: "karan.jpeg" },
                { name: "Koustav Saha", role: "Team Member", img: "koustav.jpeg" },
                { name: "Sahil Kokare", role: "Team Member", img: "sahil.jpeg" },
                { name: "Soham Mandal", role: "Team Member", img: "soham.png" },
                { name: "Vedant Murmatti", role: "Team Member", img: "vedant.png" },
                { name: "Yuvika Gupta", role: "Team Member", img: "yuvika.jpeg" }
            ];

            return (
                <section className="min-h-screen bg-[#2c0b0e] text-[#fdf6e3] py-32 px-6 relative z-20" id="team">
                    <div className="container mx-auto max-w-7xl">
                        <div className="flex flex-col md:flex-row justify-between items-end mb-24 border-b border-[#fdf6e3]/20 pb-8">
                            <h2 className="font-display text-7xl">Our Team</h2>
                            <p className="text-xl opacity-60 mb-2 font-serif tracking-widest uppercase">Group 10 Members</p>
                        </div>
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-16">
                            {teamMembers.map((member, i) => (
                                <motion.div key={i} initial={{ opacity: 0, y: 40 }} whileInView={{ opacity: 1, y: 0 }} transition={{ delay: (i % 4) * 0.1, duration: 0.6 }} viewport={{ once: true }} className="group relative">
                                    <div className="aspect-[4/5] bg-[#3d1216] border border-[#fdf6e3]/10 relative overflow-hidden transition-all duration-500 group-hover:border-[#c2410c] shadow-2xl">
                                        <img src={member.img} alt={member.name} className="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700" />
                                    </div>
                                    <div className="mt-6 relative">
                                        <h3 className="text-2xl font-display mb-1 group-hover:text-[#f59e0b] transition-colors">{member.name}</h3>
                                        <p className="text-[#f59e0b] font-serif italic text-base uppercase tracking-wider">{member.role}</p>
                                    </div>
                                </motion.div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        const App = () => {
            const { scrollYProgress } = useScroll();
            const frameOpacity = useTransform(scrollYProgress, [0, 0.05], [1, 0]);
            
            return (
                <div className="w-full">
                    <div className="texture"></div>
                    <motion.div className="phad-frame" style={{ opacity: frameOpacity }} />
                    <Hero />
                    <HorizontalScroll />
                    <Timeline />
                    <Team />
                    <motion.a 
                        href="chatbot.html" 
                        whileHover={{ scale: 1.1, rotate: 5 }} 
                        whileTap={{ scale: 0.9 }} 
                        className="fixed bottom-10 right-10 z-[9999] w-16 h-16 bg-[#8B0000] rounded-full flex items-center justify-center shadow-2xl border-2 border-[#f59e0b] text-[#fdf6e3] cursor-pointer"
                    >
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </motion.a>
                  <footer className="bg-[#120303] text-[#fdf6e3] pt-20 pb-10 relative z-10 border-t border-[#f59e0b]/30">
                    <div className="max-w-7xl mx-auto px-10">
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-16 mb-16">
                            <div className="flex flex-col space-y-4">
                                <h3 className="font-display text-4xl text-[#f59e0b]">Phad Painting</h3>
                                <p className="font-serif text-sm leading-relaxed opacity-70 max-w-sm">
                                    Preserving the traditional scroll art of Rajasthan through digital scrollytelling. A tribute to the Bhopa community and the legendary artists of Shahpura.
                                </p>
                            </div>
                            <div className="flex flex-col space-y-4">
                                <h4 className="text-[#f59e0b] uppercase tracking-widest text-xs font-bold">The Journey</h4>
                                <div className="grid grid-cols-2 gap-2 text-sm opacity-60 font-serif">
                                    <a href="#" className="hover:text-[#f59e0b] transition-colors">Home</a>
                                    <a href="#timeline" className="hover:text-[#f59e0b] transition-colors">The Process</a>
                                    <a href="#team" className="hover:text-[#f59e0b] transition-colors">Our Team</a>
                                    <a href="chatbot.html" className="hover:text-[#f59e0b] transition-colors">Art Bot</a>
                                </div>
                            </div>
                            <div className="flex flex-col space-y-4 md:items-end md:text-right">
                                <h4 className="text-[#f59e0b] uppercase tracking-widest text-xs font-bold">Institutional Partner</h4>
                                <p className="font-display text-2xl opacity-90">Flame University</p>
                                <p className="font-serif text-xs tracking-widest opacity-50 uppercase">
                                    Discover India Program <br /> Group 10 | 2025-2026
                                </p>
                            </div>
                        </div>
                        <div className="border-t border-[#fdf6e3]/10 pt-8 flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                            <p className="text-[10px] tracking-[0.3em] uppercase opacity-40">
                                © 2025-2026 Phad: The Living Scroll. All Rights Reserved.
                            </p>
                            <div className="text-[#f59e0b] opacity-40">
                                <svg width="30" height="30" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z" />
                                </svg>
                            </div>
                            <p className="text-[10px] tracking-[0.3em] uppercase opacity-40 italic">
                                Crafting Traditions Digitally
                            </p>
                        </div>
                    </div>
                </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <script>
    (function() {
        // High-res polling for the elements to ensure React has mounted
        const checkReady = () => {
            const returnStep = sessionStorage.getItem('returnToStep');
            const body = document.body;
            const curtain = document.getElementById('portal-curtain');
            const cards = document.querySelectorAll('.timeline-card');

            // If we are waiting for a step but cards aren't here, keep polling
            if (returnStep && cards.length === 0) {
                requestAnimationFrame(checkReady);
                return;
            }

            // Execute Scroll Logic
            if (returnStep) {
                let targetElement = null;
                const stepNum = returnStep.replace('step', '').padStart(2, '0');
                
                cards.forEach(card => {
                    if (card.innerText.includes("Step " + stepNum)) targetElement = card;
                });

                if (targetElement) {
                    const rect = targetElement.getBoundingClientRect();
                    const topPos = rect.top + window.pageYOffset - (window.innerHeight / 4);
                    
                    if (returnStep === 'step1') {
                        // For Step 1: Reveal first, then smooth scroll
                        body.classList.add('ready-to-show');
                        curtain.style.opacity = "0";
                        window.scrollTo({ top: 0, behavior: 'auto' });
                        setTimeout(() => {
                            window.scrollTo({ top: topPos, behavior: 'smooth' });
                            sessionStorage.removeItem('returnToStep');
                        }, 300);
                    } else {
                        // For other steps: Jump immediately while black, then reveal
                        window.scrollTo({ top: topPos, behavior: 'auto' });
                        setTimeout(() => {
                            body.classList.add('ready-to-show');
                            curtain.style.opacity = "0";
                            sessionStorage.removeItem('returnToStep');
                        }, 400);
                    }
                } else {
                    // Fallback if target lost
                    body.classList.add('ready-to-show');
                    curtain.style.opacity = "0";
                }
            } else {
                // Default Entry
                body.classList.add('ready-to-show');
                curtain.style.opacity = "0";
            }
        };

        // Start checking once DOM content is parsed
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', checkReady);
        } else {
            checkReady();
        }
    })();
    </script>
</body>
</html>
